<!DOCTYPE html>
<html lang="en">
  <!-- Head -->

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>

    <!-- favicon -->
    <link rel="icon" href="favicon.ico" />

    <!-- font-family -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200&family=Ubuntu+Mono:ital@1&display=swap"
      rel="stylesheet"
    />

    <!--css -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="login.css" />

    <!-- font awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-..."
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/css/bootstrap.min.css"
      integrity="sha512-..."
      crossorigin="anonymous"
    />

    <!-- bootstrap / js-->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </head>

  <!-- Head -->

  <body>
    <!-- navbars -->
    <divg class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="index.html">
          <img
            src="re2.png"
            width="250"
            height="70"
            class="FureverHomemainlogo"
            alt=""
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="adopt.html">Adopt</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="report.html">Report</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="register.html">Register</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="login.html"><u>Login</u></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="signup.html">Sign up</a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- navbars  -->

      <form class="login" onsubmit="event.preventDefault(); login();">
        <header>Login</header>
        <div class="input">
          <i class="fa fa-user"></i>
          <input type="text" placeholder="Email address" id="email" required />
        </div>
        <div class="input">
          <i class="fa fa-lock"></i>
          <input
            type="password"
            placeholder="Password"
            id="password"
            required
          />
        </div>
        <div class="forget">
          <p id="loginError"></p>
          <a href="" class="forget">Forget password?</a>
        </div>
        <input type="submit" class="submit" value="LOGIN" />
        <span class="dont"
          >Don't have an account?
          <a href="signup.html" class="signup">Sign up</a></span
        >
      </form>
    </divg>
  </body>
  <script>
    function login() {
      console.log("Logging in...");
      let email = document.getElementById("email").value;
      let password = document.getElementById("password").value;
      let error = document.getElementById("loginError");
      let users = JSON.parse(localStorage.getItem("users"));

      let user = users.filter(
        (user) => user.email === email && user.password === password
      );
      console.log(user);
      if (user.length) {
        window.open("/FureverHome", "_self");
        localStorage.setItem("isLoggedIn", true);
        localStorage.setItem("currentUser", JSON.stringify(user));
      } else {
        console.log("login failed!");
        error.innerText = "User Not Found";
        localStorage.setItem("isLoggedIn", false);
      }
    }
  </script>
</html>
